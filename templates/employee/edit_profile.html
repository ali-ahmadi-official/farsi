{% extends 'base_employee_dashboard.html' %}
{% load static %}

{% block title %}
ویرایش پروفایل
{% endblock %}

{% block page1 %}
پروفایل من
{% endblock %}

{% block page2 %}
ویرایش پروفایل
{% endblock %}

{% block content %}
<div class="col-12">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h3 style="margin-bottom: 20px;">فرم پروفایل</h3>

        {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
        <p class="error">{{ error }}</p>
        {% endfor %}
        {% endif %}

        <div class="my-grid">
        {{ form }}
        </div>
        <div class="text-center">
            <button type="submit" class="btn bg-gradient-info w-100 mt-4 mb-0">ویرایش پروفایل</button>
        </div>
    </form>
</div>

<script>
    jalaliDatepicker.startWatch();

    const inputFile = document.getElementById('profile_image_input');
    const previewImage = document.getElementById('profile_image_preview');
    inputFile.addEventListener('change', function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                previewImage.src = e.target.result;
            }
            reader.readAsDataURL(file);
        }
    }); 
</script>
{% endblock %}